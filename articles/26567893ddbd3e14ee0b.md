---
title: "[Swift] é…åˆ—ã‚’ãƒšã‚¢ã«å¤‰æ›ã—ã¦å‡¦ç†ã™ã‚‹æ–¹æ³•"
emoji: "ğŸ”–"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["Swift"]
published: true
---

# ã¯ã˜ã‚ã«

[é…åˆ—ã‚’å‡¦ç†ã™ã‚‹ã¨ãã«æ¬¡ã®è¦ç´ ã‚’æ‰±ã†æ–¹æ³•](https://qiita.com/akeome/items/514c077cfc460d7d2382)ã®è¨˜äº‹ã‚’å‚è€ƒã«ã„ã‚ã„ã‚ã¨ã‚¢ãƒ¬ãƒ³ã‚¸ã—ã¦ã¿ã¾ã—ãŸã€‚
ã¾ãŸã€ç©ºé…åˆ—ãŒã‚„ã£ã¦ããŸã‚Šã—ã¦ã€ãƒšã‚¢ã®ç”Ÿæˆã«å¤±æ•—ã—ãŸã¨ãã«ã‚¨ãƒ©ãƒ¼ã«ãªã‚‰ãªã„ã“ã¨ã‚‚ç¢ºèªã—ãªãŒã‚‰æ›¸ã„ã¦ã¿ã¾ã—ãŸã€‚

## ãƒ‘ã‚¿ãƒ¼ãƒ³1ï¼šæœ€å¾Œã®è¦ç´ ã®ãƒšã‚¢ã«ã¯nilã‚’å…¥ã‚ŒãŸã„å ´åˆ

```swift
extension Array {
    var pair: [(Element, Element?)] {
        var copy: [Element?] = self
        copy.append(nil)
        return enumerated().map { ($0.element, copy[$0.offset + 1]) }
    }
}

let nums = [1,2,3]
nums.pair.forEach { num1, num2 in
    guard let num2 = num2 else {
        return
    }
    print("\(num1) * \(num2) = \(num1 * (num2))")
}
//  å‡ºåŠ›
//  1 * 2 = 2
//  2 * 3 = 6

let empty: [Int]  = []
empty.pair.forEach { num1, num2 in
    guard let num2 = num2 else {
        return
    }
    print("\(num1) * \(num2) = \(num1 * (num2))")
}
//  å‡ºåŠ›
//  ãªã—
```

## ãƒ‘ã‚¿ãƒ¼ãƒ³2ï¼šæœ€å¾Œã®è¦ç´ ã®ãƒšã‚¢ã«ã¯å…ˆé ­ã®è¦ç´ ã¨ãƒšã‚¢ã«ã—ãŸã„å ´åˆ

```swift
extension Array {
    var pair: [(Element, Element)]? {
        var copy: [Element] = self
        guard let first = self.first else { // ã“ã®guardæ–‡ã§æ—©æœŸãƒªã‚¿ãƒ¼ãƒ³ã•ã›ãªã„ã¨ç©ºã®é…åˆ—ãŒæ¥ãŸã¨ãã«å®Ÿè¡Œæ™‚ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹
            return nil // ç©ºé…åˆ—ã‚’è¿”å´ã—ã¦ã‚‚ã‚ˆã„ãŒpairãŒä½œã‚Œãªã‹ã£ãŸã¨ã„ã†æ„å‘³ã‚‚è¾¼ã‚ã¦nilã‚’è¿”ã™
        }
        copy.append(first)
        return enumerated().map { ($0.element, copy[$0.offset + 1]) }
    }
}

let nums = [1,2,3]
nums.pair?.forEach { num1, num2 in
    print("\(num1) * \(num2) = \(num1 * (num2))")
}
// å‡ºåŠ›
// 1 * 2 = 2
// 2 * 3 = 6
// 3 * 1 = 3 â† æœ€å¾Œã®ãƒšã‚¢ã«ã¯å…ˆé ­ã®è¦ç´ ãŒå…¥ã‚‹

let empty: [Int]  = []
empty.pair?.forEach { num1, num2 in
    print("\(num1) * \(num2) = \(num1 * (num2))")
}
// å‡ºåŠ›
// ãªã—
```

## ãƒ‘ã‚¿ãƒ¼ãƒ³3ï¼šæœ€å¾Œã®è¦ç´ ã®ãƒšã‚¢ã‚’è‡ªç”±ã«å¤‰æ›´ã•ã›ãŸã„å ´åˆ

```swift
extension Array {
    func pair(lastPairIndex: Int? = 0) -> [(Element, Element?)] {
        var copy: [Element?] = self
        var lastPair: Element?
        if let lastPairIndex = lastPairIndex, self.indices.contains(lastPairIndex) {
            lastPair = self[lastPairIndex]
        } else {
            lastPair = nil
        }
        copy.append(lastPair)
        return enumerated().map { ($0.element, copy[$0.offset + 1]) }
    }
}

let nums = [1,2,3]
nums.pair(lastPairIndex: nil).forEach { num1, num2 in
    guard let num2 = num2 else {
        return
    }
    print("\(num1) * \(num2) = \(num1 * (num2))")
}
// å‡ºåŠ›
// 1 * 2 = 2
// 2 * 3 = 6

nums.pair().forEach { num1, num2 in
    guard let num2 = num2 else {
        return
    }
    print("\(num1) * \(num2) = \(num1 * (num2))")
}
// å‡ºåŠ›
// 1 * 2 = 2
// 2 * 3 = 6
// 3 * 1 = 3

// ã“ã†ã„ã†ã“ã¨ï¼ˆæœ€å¾Œã¯æœ€å¾Œã®å€¤ã¨ãƒšã‚¢ã«ãªã‚‹ï¼‰ã‚‚å¯èƒ½
nums.pair(lastPairIndex: nums.indices.last).forEach { num1, num2 in
    guard let num2 = num2 else {
        return
    }
    print("\(num1) * \(num2) = \(num1 * (num2))")
}
// å‡ºåŠ›
// 1 * 2 = 2
// 2 * 3 = 6
// 3 * 3 = 9 â† æœ€å¾Œã¯æœ€å¾Œã®å€¤ã¨ãƒšã‚¢ã«ãªã‚‹


let empty: [Int]  = []
empty.pair().forEach { num1, num2 in
    guard let num2 = num2 else {
        return
    }
    print("\(num1) * \(num2) = \(num1 * (num2))")
}
// å‡ºåŠ›
// ãªã—

empty.pair(lastPairIndex: nil).forEach { num1, num2 in
    guard let num2 = num2 else {
        return
    }
    print("\(num1) * \(num2) = \(num1 * (num2))")
}
// å‡ºåŠ›
// ãªã—

// ã“ã„ã†ã“ã¨ã—ã¦ã‚‚ã‚¨ãƒ©ãƒ¼ã«ã¯ãªã‚‰ãªã„
empty.pair(lastPairIndex: 100).forEach { num1, num2 in
    guard let num2 = num2 else {
        return
    }
    print("\(num1) * \(num2) = \(num1 * (num2))")
}
// å‡ºåŠ›
// ãªã—
```

# ã•ã„ã”ã«

Array ã® Array[Index] ã§ã®ã‚¢ã‚¯ã‚»ã‚¹ã¯å®Ÿè¡Œæ™‚ã¾ã§ã€ã‚¨ãƒ©ãƒ¼ã«æ°—ã¥ã‹ãªã„ã®ã§ `self.indices.contains(Index)` ã§ Index ãŒå­˜åœ¨ã™ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã—ãŸæ–¹ãŒã„ã„ã§ã™ã€‚

ã¨ã„ã†ã‚ˆã‚Šã‚‚ã€ãã®ã‚ˆã†ãªã‚¢ã‚¯ã‚»ã‚¹ã‚’ã™ã‚‹å‡¦ç†ã‚’æ›¸ã‹ãªã„ã®ãŒãƒ™ã‚¿ãƒ¼ã§ã™ã€‚
