---
title: "[Swift] Entity"
emoji: "ðŸŒ¾"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["Swift"]
published: true
---

# å‰æ

- FrameworkEntity ã¯ DomainEntity ã‚’çŸ¥ã£ã¦ã„ã‚‹
- DomainEntity ã¯ FrameworkEntity ã‚’çŸ¥ã‚‰ãªã„

```swift
struct DomainEntity {
    let hoge: Int
    let moge: Int
}

struct FrameworkEntity {
    let hoge: Int
    let moge: Int
}
```

å…±é€šå‡¦ç†ã¯ä»¥ä¸‹ã¨ã—ã¾ã™ã€‚

```swift
let domainEntity = DomainEntity(hoge: 1, moge: 2)
let frameworkEntity = FrameworkEntity(hoge: 3, moge: 4)
```

# DomainEntity -> FrameworkEntity ã®å¤‰æ›ã®ãƒ‘ã‚¿ãƒ¼ãƒ³

## (1) æ—¢å­˜ã® `init` ã‚’ç›´æŽ¥ä½¿ç”¨ã™ã‚‹

```swift
let frameworkEntity = FrameworkEntity(hoge: domainEntity.hoge, moge: domainEntity.moge)
```

- ãƒ¡ãƒªãƒƒãƒˆ
  - ã‚·ãƒ³ãƒ—ãƒ«
- ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ
  - å¤‰æ•°ãŒå¤šã„ã¨å¤§å¤‰
  - ãƒ†ã‚¹ãƒˆã—ã¥ã‚‰ã„

## (2) FrameworkEntity ã«æ–°ãŸãª `init` ã‚’å®šç¾©ã™ã‚‹ï¼ˆå¼•æ•°ï¼šDomainEntityï¼‰

```swift
extension FrameworkEntity {
    init(domainEntity: DomainEntity) {
        hoge = domainEntity.hoge
        moge = domainEntity.moge
    }
}

let frameworkEntity = FrameworkEntity(domainEntity: domainEntity)
```

ã‚ˆã•ãã†ã€ãƒ†ã‚¹ãƒˆã‚‚ã§ããã†ã€ã‚¤ãƒ‹ã‚·ãƒ£ãƒ©ã‚¤ã‚ºãŒå¢—ãˆã¦ã—ã¾ã†ã®ãŒæ‡¸å¿µã‹ã‚‚ã—ã¦ã¾ã›ã‚“ã©ã“ã§ã‚‚ä½¿ã‚ã‚Œã¦ã—ã¾ã†å±é™ºæ€§ãŒã‚ã‚Šãã†ã§ã™ã€‚
å¤‰æ•°ãŒå¢—ãˆã¦ã‚‚ä¸Šæ‰‹ãè¡¨ã›ãã†ã€ã„ã‚ã‚“ãªå‡¦ç†ã‚‚ã§ããã†

- ãƒ¡ãƒªãƒƒãƒˆ
  - ãƒ†ã‚¹ãƒˆã—ã‚„ã™ã„
  - å¤‰æ•°ãŒå¤šã„
- ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ
  - ã‚¤ãƒ‹ã‚·ãƒ£ãƒ©ã‚¤ã‚ºã®æ–¹æ³•ãŒå¢—ãˆã¦ã—ã¾ã†

ã“ã†ã‚‚ã‹ã‘ã‚‹ãŒã€å¤‰æ›æ™‚ã«å‡¦ç†ã‚’

```swift
extension FrameworkEntity {
    init(domainEntity: DomainEntity) {
        self.init(hoge: domainEntity.hoge, moge: domainEntity.moge)
    }
}

let frameworkEntity = FrameworkEntity(domainEntity: domainEntity)
```

## (3) FrameworkEntity ã‚’å¤‰æ›ã™ã‚‹ç®‡æ‰€ã§ DomainEntity ã‚’ private extension ã§å¤‰æ›ã™ã‚‹å¤‰æ•°ã‚’å®šç¾©ã™ã‚‹

```swift
private extension DomainEntity {
    var frameworkEntity: FrameworkEntity {
        FrameworkEntity(hoge: self.hoge, moge: self.moge)
    }
}

let frameworkEntity = domainEntity.frameworkEntity
```

â†’ ãƒ‰ãƒ¡ã‚¤ãƒ³å±¤ã¯Frameworkå±¤ã‚’çŸ¥ã‚‰ãªã„ã¯ãš âŒ

## (4) FrameworkEntity ã‚’å¤‰æ›ã™ã‚‹ç®‡æ‰€ã§ DomainEntity ã‚’ private extension ã§å¤‰æ›ã™ã‚‹é–¢æ•°ã‚’å®šç¾©ã™ã‚‹

```swift
private extension DomainEntity {
    func convertToFrameworkEntity() -> FrameworkEntity {
        FrameworkEntity(hoge: self.hoge, moge: self.moge)
    }
}

let frameworkEntity = domainEntity.convertToFrameworkEntity()
```

â†’ ãƒ‰ãƒ¡ã‚¤ãƒ³å±¤ã¯Frameworkå±¤ã‚’çŸ¥ã‚‰ãªã„ã¯ãš âŒ

## (5) FrameworkEntity ã‚’å¤‰æ›ã™ã‚‹ç®‡æ‰€ã§ DomainEntity ã«å¤‰æ›ã™ã‚‹é–¢æ•°ã‚’å®šç¾©ã™ã‚‹

```swift
func convertToFrameworkEntity(from domainEntity: DomainEntity) -> FrameworkEntity {
    FrameworkEntity(hoge: domainEntity.hoge, moge: domainEntity.moge)
}

let frameworkEntity = convertToFrameworkEntity(from: domainEntity)
```

â†’ æ‚ªãã¯ãªã„ã¯ãšã€ãƒ†ã‚¹ãƒˆã‚‚ã§ããã†ã€ãŸã ã€å¤‰æ•°ãŒå¢—ãˆã‚‹ã¨ã€å¤§å¤‰ãã†ã€‚(1) ã¨åŒã˜ â–²

# FrameworkEntity -> DomainEntityã®å¤‰æ›ã®ãƒ‘ã‚¿ãƒ¼ãƒ³

## (1) æ™®é€šã« init ã™ã‚‹

```swift
let domainEntity = DomainEntity(hoge: frameworkEntity.hoge, moge: frameworkEntity.moge)
```

## (2) DomainEntity ã‚’æ¸¡ã™ã‚¤ãƒ‹ã‚·ãƒ£ãƒ©ã‚¤ã‚ºã‚’å®šç¾©ã™ã‚‹

```swift
extension DomainEntity {
    init(frameworkEntity: FrameworkEntity) {
        hoge = frameworkEntity.hoge
        moge = frameworkEntity.moge
    }
}

let domainEntity = DomainEntity(frameworkEntity: frameworkEntity)
```

## (3) FrameworkEntity ã‚’å¤‰æ›ã™ã‚‹ç®‡æ‰€ã§ DomainEntity ã‚’ private extension ã§å¤‰æ›ã™ã‚‹å¤‰æ•°ã‚’å®šç¾©ã™ã‚‹

```swift
private extension FrameworkEntity {
    var domainEntity: DomainEntity {
        DomainEntity(hoge: self.hoge, moge: self.moge)
    }
}

let domainEntity = frameworkEntity.domainEntity
```

## (4) FrameworkEntity ã‚’å¤‰æ›ã™ã‚‹ç®‡æ‰€ã§ DomainEntity ã‚’ private extension ã§å¤‰æ›ã™ã‚‹é–¢æ•°ã‚’å®šç¾©ã™ã‚‹

```swift
private extension FrameworkEntity {
    func convertToDomainEntity() -> DomainEntity {
        DomainEntity(hoge: self.hoge, moge: self.moge)
    }
}

let domainEntity = frameworkEntity.convertToDomainEntity()
```

## (5) FrameworkEntity ã‚’å¤‰æ›ã™ã‚‹ç®‡æ‰€ã§ DomainEntity ã«å¤‰æ›ã™ã‚‹é–¢æ•°ã‚’å®šç¾©ã™ã‚‹ â† ã“ã‚ŒãŒã„ã„æ°—ãŒã™ã‚‹

```swift
func convertToDomainEntity(from frameworkEntity: FrameworkEntity) -> DomainEntity {
    DomainEntity(hoge: frameworkEntity.hoge, moge: frameworkEntity.moge)
}

let domainEntity = convertToDomainEntity(from: frameworkEntity)
```