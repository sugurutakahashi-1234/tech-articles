---
title: "[Swift] å¹³é¢åº§æ¨™ç³»ã§ã‚ã‚‹ç‚¹ãŒã‚ã‚‹ç·šåˆ†ä¸Šã«ã‚ã‚‹ã‹ã‚’è©•ä¾¡ã™ã‚‹æ–¹æ³•"
emoji: "ğŸ•Š"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["Swift"]
published: true
---
# è§£èª¬

ã‚¿ã‚¤ãƒˆãƒ«ã®é€šã‚Šã§ã™ã€‚
ç’°å¢ƒ:Xcode12.5.1

```swift
import Foundation

struct RectangularCoordinateSystemPoint {
    let x: Double
    let y: Double
    
    init(_ x: Double, _ y: Double) {
        self.x = x
        self.y = y
    }
}

extension RectangularCoordinateSystemPoint {
    // A--P-B ã¨ã„ã†é–¢ä¿‚ãªã‚‰ AP + PB < AB ã¯æˆã‚Šç«‹ãŸãªã„ã“ã¨ã‚’ç”¨ã„ã‚‹ 
    // â€» ã“ã“ã§ AP + PB = AB ã§è©•ä¾¡ã™ã‚‹ã¨ Double ã®ç«¯æ•°ã§ç­‰å¼ãŒæˆã‚Šç«‹ãŸãªããªã‚‹ã®ã§ .ulpOfOne ã‚’ç”¨ã„ã‚‹
    func isIncludeLineSegment(consistingOf endPoint: (a: RectangularCoordinateSystemPoint, b: RectangularCoordinateSystemPoint)) -> Bool {
        let distanceToA = self.distance(to: endPoint.a)
        let distanceToB = self.distance(to: endPoint.b)
        let distanceAB = endPoint.a.distance(to: endPoint.b)
        return distanceToA + distanceToB - distanceAB < .ulpOfOne
    }

    func distance(to target: RectangularCoordinateSystemPoint) -> Double {
        return sqrt(self.diffX(to: target) * self.diffX(to: target) + self.diffY(to: target) * self.diffY(to: target)) // äºŒä¹—ã¯pow()ã§ã‚‚ã‚ˆã„ãŒDoubleå‹ã®æŒ‡å®šãŒã‚ã‚‹ãŸã‚ä½¿ã„ã¥ã‚‰ã„ãŸã‚æ•¬é 
    }
    
    func diffX(to target: RectangularCoordinateSystemPoint) -> Double {
        return self.x - target.x
    }
    
    func diffY(to target: RectangularCoordinateSystemPoint) -> Double {
        return self.y - target.y
    }
}

extension RectangularCoordinateSystemPoint {
    // åˆ¥ã®è©•ä¾¡æ–¹æ³•ï¼ˆå•é¡ŒãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ï¼‰
    func isIncludeLineSegmentOther(consistingOf endPoint: (a: RectangularCoordinateSystemPoint, b: RectangularCoordinateSystemPoint)) -> Bool {
        if (endPoint.a.x <= self.x && self.x <= endPoint.b.x) || (endPoint.b.x <= self.x && self.x <= endPoint.a.x) {
            if (endPoint.a.y <= self.y && self.y <= endPoint.b.y) || (endPoint.b.y <= self.y && self.y <= endPoint.a.y) {
                if (self.y * (endPoint.a.x - endPoint.b.x)) + (endPoint.a.y * (endPoint.b.x - self.x)) + (endPoint.b.y * (self.x - endPoint.a.x)) == 0 {
                    // ç‚¹PãŒç·šåˆ†ABä¸Šã«ã‚ã‚‹
                    return true
                }
            }
        }
        return false
    }
}

/// ãƒ†ã‚¹ãƒˆ
/// y = 2x + 1
/// 5ç‚¹åˆ—æŒ™ï¼š(0, 1), (1, 3), (2,5), (3,7), (4,8)
/// (1,3) ã¨ (3, 7) ã®ç·šåˆ†ã§è€ƒãˆã‚‹
let point01 = RectangularCoordinateSystemPoint(0,1)
let point13 = RectangularCoordinateSystemPoint(1,3)
let point25 = RectangularCoordinateSystemPoint(2,5)
let point37 = RectangularCoordinateSystemPoint(3,7)
let point48 = RectangularCoordinateSystemPoint(4,8)
let point00 = RectangularCoordinateSystemPoint(0,0) // ç›´ç·šä¸Šã«ãªã„ãã®ä»–ã®ç‚¹

/// isIncludeLineSegmentã§ã®ãƒ†ã‚¹ãƒˆ
print(point01.isIncludeLineSegment(consistingOf: (point13, point37))) // false
print(point13.isIncludeLineSegment(consistingOf: (point13, point37))) // true
print(point25.isIncludeLineSegment(consistingOf: (point13, point37))) // true
print(point37.isIncludeLineSegment(consistingOf: (point13, point37))) // true
print(point48.isIncludeLineSegment(consistingOf: (point13, point37))) // false
print(point00.isIncludeLineSegment(consistingOf: (point13, point37))) // false

/// isIncludeLineSegmentOtherã§ã®ãƒ†ã‚¹ãƒˆ
print(point01.isIncludeLineSegmentOther(consistingOf: (point13, point37))) // false
print(point13.isIncludeLineSegmentOther(consistingOf: (point13, point37))) // true
print(point25.isIncludeLineSegmentOther(consistingOf: (point13, point37))) // true
print(point37.isIncludeLineSegmentOther(consistingOf: (point13, point37))) // true
print(point48.isIncludeLineSegmentOther(consistingOf: (point13, point37))) // false
print(point00.isIncludeLineSegmentOther(consistingOf: (point13, point37))) // false
```
