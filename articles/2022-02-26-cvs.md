---
title: "[Swift] [Combine] CurrentValueSubject ã§ nil ã‚’è¨±å®¹ã—ãŸã¨ãã®æ³¨æ„ç‚¹"
emoji: "ğŸŒ¾"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["Swift"]
published: true
---

# `CurrentValueSubject` ã§ `nil` ã‚’è¨±å®¹ã—ãŸã¨ãã®æ³¨æ„ç‚¹

`CurrentValueSubject` ã® `Output` ã«ã¤ã„ã¦ã€ `nil` ã‚’è¨±å®¹ã™ã‚‹ã¨ã€**ãã® `.value` ãŒ `nil` ã®å ´åˆã§ã‚‚ã€ãã®å‹ãŒæŒã£ã¦ã„ã‚‹å¤‰æ•°ã«å€¤ã‚’ä»£å…¥ã™ã‚‹ã¨ã€ã‚¹ãƒˆãƒªãƒ¼ãƒ ãŒæµã‚Œã¾ã™ã€‚**

ä»¥ä¸‹ã€ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã§ã™ã€‚

```swift
import Combine

var cancellables = Set<AnyCancellable>()

struct Hoge {
    var mogemoge: Int
}

let hogePub: CurrentValueSubject<Hoge?, Never> = .init(nil)

hogePub
    .dropFirst()
    .sink { print("receive: \(String(describing: $0))") }
    .store(in: &cancellables)

hogePub.value = Hoge(mogemoge: 1)
hogePub.value?.mogemoge = 2
hogePub.value = nil
hogePub.value?.mogemoge = 3
hogePub.value?.mogemoge = 4

// ï¼ˆå‡ºåŠ›ï¼‰
// receive: Optional(__lldb_expr_58.Hoge(mogemoge: 1)) â† ã‚ã‹ã‚‹ğŸ™‚
// receive: Optional(__lldb_expr_58.Hoge(mogemoge: 2)) â† ã‚ã‹ã‚‹ğŸ™‚
// receive: nil â† ã‚ã‹ã‚‹ğŸ™‚
// receive: nil â† ãˆâ—ï¸â“
// receive: nil â† ãˆâ—ï¸â“
```

çŸ¥ã‚‰ãªã„ã¨ãƒãƒã‚Šãã†ã§ã™ã­ã€‚ã€‚ã€‚

ã‚‚ã—ã€ã“ã®æŒ™å‹•ãŒå›°ã‚‹ãªã‚‰ã°ã€`if` ã‚„ `guard` ã§å›é¿ã—ã¾ã—ã‚‡ã†ã€‚

---

ä»¥ä¸Šã«ãªã‚Šã¾ã™ã€‚