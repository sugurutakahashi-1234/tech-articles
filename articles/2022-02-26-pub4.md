---
title: "[Swift] [Combine] CurrentValueSubject ã«ã¤ã„ã¦ Calss ã¨ Struct ã§ã¯æŒ™å‹•ãŒç•°ãªã‚‹ä»¶"
emoji: "ğŸŒ¾"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["Swift"]
published: true
---

# çµè«–

`CurrentValueSubject` ã® `Output` ã« `Struct` ã¾ãŸã¯ `Calss` ã‚’è¨­å®šã—ãŸå ´åˆã«ä»¥ä¸‹ã®ã‚ˆã†ãªå·®ãŒç”Ÿã˜ã‚‹ã€‚

- `Struct` ã®å ´åˆ
  - `var` ã¨ãªã‚‹å¤‰æ•°ã‚’æ›´æ–°ã—ãŸå ´åˆã€**å‡ºåŠ›ãŒèµ°ã‚‹**
- `Class` ã®å ´åˆ
  - `var` ã¨ãªã‚‹å¤‰æ•°ã‚’æ›´æ–°ã—ãŸå ´åˆã€**å‡ºåŠ›ã¯èµ°ã‚‰ãªã„**


# Struct ã®å ´åˆ

```swift
// ğŸŒŸstructğŸŒŸ
struct Hoge {
    var mogemoge: Int
    
    init(mogemoge: Int) {
        self.mogemoge = mogemoge
    }
}

let hogePub: CurrentValueSubject<Hoge, Never> = .init(Hoge(mogemoge: 0))

hogePub
    .dropFirst()
    .sink { print("receive: \(String(describing: $0.mogemoge))") }
    .store(in: &cancellables)

hogePub.value = Hoge(mogemoge: 1)
hogePub.value.mogemoge = 2 // â† æ³¨ç›®ğŸŒŸ
hogePub.value = Hoge(mogemoge: 3)

// ï¼ˆå‡ºåŠ›ï¼‰
// receive: 1
// receive: 2 â† æ³¨ç›®ğŸŒŸ
// receive: 3
```

- `var` ã¨ãªã‚‹å¤‰æ•°ã‚’æ›´æ–°ã—ãŸå ´åˆã€**å‡ºåŠ›ãŒèµ°ã‚‹**

# Class ã®å ´åˆ

```swift
// ğŸŒŸclassğŸŒŸ
class Hoge {
    var mogemoge: Int
    
    init(mogemoge: Int) {
        self.mogemoge = mogemoge
    }
}

let hogePub: CurrentValueSubject<Hoge, Never> = .init(Hoge(mogemoge: 0))

hogePub
    .dropFirst()
    .sink { print("receive: \(String(describing: $0.mogemoge))") }
    .store(in: &cancellables)

hogePub.value = Hoge(mogemoge: 1)
hogePub.value.mogemoge = 2 // â† æ³¨ç›®ğŸŒŸ
hogePub.value = Hoge(mogemoge: 3)

// ï¼ˆå‡ºåŠ›ï¼‰
// receive: 1
// receive: 3
â†‘
receive: 2 ãŒãªã„ï¼ï¼
```

- `var` ã¨ãªã‚‹å¤‰æ•°ã‚’æ›´æ–°ã—ãŸå ´åˆã€**å‡ºåŠ›ã¯èµ°ã‚‰ãªã„**

`Class` ã®å ´åˆã¯ç›£è¦–ã—ãŸã„å¤‰æ•°ã‚’ `@Published` ã‚’ã¤ã‘ã¦ã€ç›£è¦–ã—ã¦ã‚ã’ã‚Œã°ã‚ˆã„ã®ã§ã€ãã®è¾ºãŒ `Struct` ã¨ã®å·®åˆ¥åŒ–ã«ãªã‚Šãã†ã§ã™ã€‚

---

ä»¥ä¸Šã«ãªã‚Šã¾ã™ã€‚