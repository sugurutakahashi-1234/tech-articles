---
title: "[Swift] å®‰å…¨ã«å‰²ã‚Šç®—ã™ã‚‹ extesion"
emoji: "ğŸ•Š"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["Swift"]
published: true
---

# å®‰å…¨ã«å‰²ã‚Šç®—ã™ã‚‹ extesion

å˜ç´”ãªå®Ÿè£…ã§ã™ãŒã€èª¿ã¹ã¦ã¿ãŸã¨ã“ã‚ã‚ã‚Šãã†ã§ãªã‹ã£ãŸã®ã§ä½œæˆã—ã¾ã—ãŸã€‚

```swift
extension Double {
    /// åˆ†å­ãŒ nanã€åˆ†æ¯ãŒ nanã€ã¾ãŸã¯åˆ†æ¯ãŒ 0 ã§ã‚ã£ã¦ã‚‚å®‰å…¨ã«å‰²ã‚Šç®—ã‚’è¡Œã†
    /// - Parameter divisor: åˆ†æ¯
    /// - Returns: å‰²ã‚Šç®—ã®è¨ˆç®—çµæœã‚’è¿”å´ã™ã‚‹ã€‚ãŸã ã—ã€åˆ†å­ãŒ nanã€åˆ†æ¯ãŒ nanã€ã¾ãŸã¯åˆ†æ¯ãŒ 0 ã®å ´åˆã¯ nil ã‚’è¿”å´ã™ã‚‹ã€‚
    func safeDivide(by divisor: Double) -> Double? {
        guard !divisor.isZero else {
            return nil
        }
        guard !divisor.isNaN else {
            return nil
        }
        guard !self.isNaN else {
            return nil
        }
        return self / divisor
    }
}
```

ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’å¼•æ•°ã§æ¸¡ãã†ã¨ã‚‚è€ƒãˆã¦ã„ãŸã®ã§ã™ãŒã€ãã†ã™ã‚‹ã‚ˆã‚Šã‚‚ã€ã“ã®é–¢æ•°ã‚’ä½¿ã†å´ã§ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã¯è¨­å®šã—ã¦ã‚ã’ãŸæ–¹ãŒã„ã„ã¨æ€ã„ã€`nil` ã‚’è¿”å´ã™ã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚

ä»–ã«ã‚‚ `å®‰å…¨â—¯â—¯ã™ã‚‹` ç³»ã®ä¾¿åˆ©é–¢æ•°ã‚’ä½œã‚‹å ´åˆã¯ `nil` ã‚’è¿”ã™ã®ãŒã‚ˆã•ãã†ã§ã™ã­ã€‚

# æŒ™å‹•ã®ç¢ºèª

ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã«ãªã‚Šã¾ã™ã€‚

```swift
var a: Double = 0.0
var b: Double = 0.0

a = 0.0
b = 0.0
print("original: \(a) / \(b) = \(a / b)")
print("safeDivide: \(a) / \(b) = \(a.safeDivide(by: b) ?? 0.0)")
// original: 0.0 / 0.0 = -nan
// safeDivide: 0.0 / 0.0 = 0.0

a = 1.0
b = 1.0
print("original: \(a) / \(b) = \(a / b)")
print("safeDivide: \(a) / \(b) = \(a.safeDivide(by: b) ?? 0.0)")
// original: 1.0 / 1.0 = 1.0
// safeDivide: 1.0 / 1.0 = 1.0

a = 1.0
b = 0.0
print("original: \(a) / \(b) = \(a / b)")
print("safeDivide: \(a) / \(b) = \(a.safeDivide(by: b) ?? 0.0)")
// original: 1.0 / 0.0 = inf
// safeDivide: 1.0 / 0.0 = 0.0

a = Double.nan
b = 1.0
print("original: \(a) / \(b) = \(a / b)")
print("safeDivide: \(a) / \(b) = \(a.safeDivide(by: b) ?? 0.0)")
// original: nan / 1.0 = nan
// safeDivide: nan / 1.0 = 0.0

a = 1.0
b = Double.nan
print("original: \(a) / \(b) = \(a / b)")
print("safeDivide: \(a) / \(b) = \(a.safeDivide(by: b) ?? 0.0)")
// original: 1.0 / nan = nan
// safeDivide: 1.0 / nan = 0.0
```

é€šå¸¸æ™‚ã ã¨ `0.0 / 0.0 = -nan` ã¨ãªã‚‹ã®ã¯äºˆæ¸¬ã§ãã¾ã›ã‚“ã‚ˆã­ã€‚ï¼ˆãƒãƒã‚Šã¾ã—ãŸã€‚ã€‚ã€‚ï¼‰

ä»¥ä¸Šã«ãªã‚Šã¾ã™ã€‚